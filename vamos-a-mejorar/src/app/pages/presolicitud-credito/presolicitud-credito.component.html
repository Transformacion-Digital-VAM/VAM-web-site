<div class="form-container">
  <!-- Encabezado mejorado -->
  <div class="form-header text-center">
    <h1 class="fw-bold text-gradient-primary">
      Solicitud de Crédito
    </h1>
    <div class="divider mx-auto bg-gradient" style="width: 80px; height: 4px;"></div>
    <p class="lead text-muted mb-0">Complete el formulario y un asesor se pondrá en contacto con usted</p>
    <p class="text-muted small">Todos los campos marcados con <span class="text-danger">*</span> son obligatorios</p>
  </div>

  <p-toast></p-toast>

  <!-- Tarjeta del formulario -->
  <div class="card shadow-lg mb-5 mx-auto form-card">
    <div class="card-header text-white py-3" style="background-color: darkblue;">
      <h3 class="mb-0 d-flex align-items-center">
        <i class="fa-solid fa-user-pen me-2"></i> Datos del Solicitante
      </h3>
    </div>
    
    <div class="card-body p-4 p-md-5">
      <form [formGroup]="formularioSolicitud" (ngSubmit)="onSubmit()" class="row g-4 needs-validation" novalidate>
        
        <!-- Sección de información personal -->
        <div class="col-12 section-header">
          <h5 class="section-title">
            <i class="fa-solid fa-id-card me-2"></i> Información Personal
          </h5>
          <div class="section-divider"></div>
        </div>
        
        <div class="col-md-12">
          <div class="form-floating">
            <input type="text" class="form-control" id="nombre" formControlName="nombre" 
                   placeholder="Nombre completo" required>
            <label for="nombre">Nombre completo <span class="text-danger">*</span></label>
            <div class="invalid-feedback">
              Por favor ingrese su nombre completo.
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="form-floating">
            <input type="text" class="form-control" id="domicilio" formControlName="domicilio" 
                   placeholder="Domicilio" required>
            <label for="domicilio">Domicilio <span class="text-danger">*</span></label>
            <div class="invalid-feedback">
              Por favor ingrese su domicilio.
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-floating">
            <input type="date" class="form-control" id="fechaNacimiento" 
                   formControlName="fechaNacimiento" required>
            <label for="fechaNacimiento">Fecha de nacimiento <span class="text-danger">*</span></label>
            <div class="invalid-feedback">
              Por favor ingrese su fecha de nacimiento.
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="form-floating">
            <input type="tel" class="form-control" id="telefono" formControlName="telefono" 
                   placeholder="Teléfono" required>
            <label for="telefono">Teléfono <span class="text-danger">*</span></label>
            <div class="invalid-feedback">
              Por favor ingrese un número de teléfono válido.
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="form-floating">
              <input type="email" class="form-control" id="email" formControlName="email" 
                     placeholder="Correo electrónico" required>
              <label for="email">Correo Electrónico <span class="text-danger">*</span></label>
              <div class="invalid-feedback">
              Por favor ingrese un correo electrónico válido.
            </div>
          </div>
        </div>
        
        <!-- Sección de ubicación -->
        <div class="col-12 mt-4 section-header">
          <h5 class="section-title">
            <i class="fa-solid fa-location-dot me-2"></i> Ubicación
          </h5>
          <div class="section-divider"></div>
        </div>
        
        <div class="col-md-12">
          <div class="form-floating">
            <select class="form-select" id="localidad" formControlName="localidad" required>
              <option selected disabled></option>
              <option *ngFor="let localidad of localidades" [ngValue]="localidad">{{localidad.name}}</option>
            </select>
            <label for="localidad">Municipio <span class="text-danger">*</span></label>
            <div class="invalid-feedback">
              Por favor seleccione un municipio.
            </div>
          </div>
        </div>
        
        <!-- Sección de crédito -->
        <div class="col-12 mt-4 section-header">
          <h5 class="section-title">
            <i class="fa-solid fa-sack-dollar me-2"></i> Información del Crédito
          </h5>
          <div class="section-divider"></div>
        </div>
        
        <div class="col-md-6">
          <div class="form-floating">
            <select class="form-select" id="clienteExistente" formControlName="clienteExistente" required>
              <option selected disabled></option>
              <option *ngFor="let opcionCliente of opcionesCliente" [ngValue]="opcionCliente">{{opcionCliente.name}}</option>
            </select>
            <label for="clienteExistente">¿Es cliente existente? <span class="text-danger">*</span></label>
            <div class="invalid-feedback">
              Por favor seleccione una opción.
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="form-floating">
              <input type="number" class="form-control" id="monto" formControlName="monto" 
                     placeholder="Monto" min="1000" step="1000" required>
              <label for="monto">Monto solicitado <span class="text-danger">*</span></label>
            <div class="invalid-feedback">
              Por favor ingrese un monto válido (mínimo $1,000).
            </div>
            <div class="form-text">Monto mínimo: $1,000 MXN</div>
          </div>
        </div>
        
        <!-- Términos y condiciones -->
        <div class="col-12 mt-3">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="terminosCondiciones" 
                   formControlName="terminosCondiciones" required>
            <label class="form-check-label" for="terminosCondiciones">
              He leído y acepto los <a href="#" class="text-primary fw-bold" 
              data-bs-toggle="modal" data-bs-target="#termsModal">términos y condiciones</a> 
              <span class="text-danger">*</span>
            </label>
            <div class="invalid-feedback">
              Debe aceptar los términos y condiciones para continuar.
            </div>
          </div>
        </div>
        
        <!-- Botón de envío -->
        <div class="col-12 mt-4 text-center">
          <button class="btn btn-primary btn-lg px-5 py-3 fw-bold" type="submit">
            <i class="fa-solid fa-paper-plane me-2"></i> Enviar solicitud
          </button>
          <p class="text-muted small mt-3">
            <i class="fa-solid fa-lock me-1"></i> Tus datos están protegidos
          </p>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal de términos y condiciones -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content border-0 shadow-lg">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title fw-bold">
          <i class="fa-solid fa-file-contract me-2"></i> Términos y Condiciones
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <div class="pdf-container rounded-3 overflow-hidden border">
          <object data="../../../assets/files/AVISO_DE_PRIVACIDAD.pdf" type="application/pdf" width="100%" height="500px">
            <div class="alert alert-info">
              <p>Tu navegador no soporta la vista previa del PDF.</p>
              <a href="../../../assets/files/AVISO_DE_PRIVACIDAD.pdf" target="_blank" class="btn btn-primary">
                <i class="fa-solid fa-download me-2"></i> Descargar documento
              </a>
            </div>
          </object>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
          <i class="fa-solid fa-check me-2"></i> Entendido
        </button>
      </div>
    </div>
  </div>
</div>