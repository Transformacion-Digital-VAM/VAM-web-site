<!-- Hero Section -->
<div class="hero-section" style="background-image: url('assets/fachada.jpg');">
  <div class="h-[600px] w-full"></div>
  <div class="hero-content text-center text-white">
    <h2 class="text-4xl fw-bold md:text-5xl animate-on-scroll">
      ¿Te interesa formar parte de Vamos a Mejorar?
    </h2>
    <p style="color: #ffffff;">
      Explora nuestras oportunidades laborales y encuentra tu próximo desafío profesional
    </p>
  </div>
</div>

<div class="contenido">
  <div class="row">
    <!-- Columna izquierda: Vacantes -->
    <div class="col-md-7">
      <div class="text-center">
        <h2 class="display-4 fw-bold title-underline">
          
          Vacantes <span class="text-gradient-primary">Disponibles</span>
        </h2>
      </div>
      <div class="columna-izquierda">
        <h3 style="text-align: justify;">
          Buscamos personas apasionadas y comprometidas que deseen crecer profesionalmente y contribuir a un mundo
          mejor.
        </h3>
        <h3 style="text-align: justify;">
          ¡Únete al equipo de <strong>Vamos a Mejorar</strong> y transforma tu futuro con nosotros!
        </h3>
        <br>
        <div class="alert alert-info">
          <p class="header-p2">Completa tu postulación con tu CV en PDF y cuéntanos por qué eres el candidato ideal.</p>
        </div>
      </div>
    </div>

    <!-- Columna derecha: Texto + Imagen -->
    <div class="col-md-5">
      <div class="columna-derecha">
        <img src="assets/Prestamoso.png" alt="Oportunidades laborales">
      </div>
    </div>
  </div>
</div>
<!-- Main Content -->
<div class="container-flex my-5">
  <div class="container vacante-container">
    <div *ngIf="!loading && vacantes.length">
      <div *ngFor="let vacante of vacantes; let i = index" class="vacante-card">
        <div class="vacante-header">
          <div>
            <h2 class="vacante-titulo">{{ vacante.titulo }}</h2>
            <h3 class="vacante-area">{{ vacante.area }}</h3>
          </div>
          <button (click)="openModal(vacante)" class="btn btn-postularse">
            <i class="fas fa-paper-plane me-2"></i>Postularse
          </button>
        </div>

        <div class="vacante-body">
          <!-- Descripción del puesto -->
          <div class="section" [class.collapsed]="!isSeccionVisible('descripcion', i)">
            <div class="section-title fw-bold" (click)="toggleSeccion('descripcion', i)">
              <h4 class="fw-bold"><i class="fas fa-info-circle"></i> Descripción del puesto</h4>
              <i class="fas fa-chevron-down section-toggle"></i>
            </div>
            <div class="section-content">
              <p class="vacante-texto">{{ vacante.descripcion }}</p>
            </div>
          </div>

          <!-- Horario y ubicación -->
          <div class="section" [class.collapsed]="!isSeccionVisible('horario', i)">
            <div class="section-title" (click)="toggleSeccion('horario', i)">
              <h4 class="fw-bold"><i class="far fa-clock"></i> Horario y ubicación</h4>
              <i class="fas fa-chevron-down section-toggle"></i>
            </div>
            <div class="section-content">
              <ul class="vacante-lista">
                <li>
                  <i class="fas fa-calendar-alt icono"></i>
                  <span>{{ vacante.horario.dias }}</span>
                </li>
                <li>
                  <i class="fas fa-clock icono"></i>
                  <span>{{ vacante.horario.horas }}</span>
                </li>
                <li>
                  <i class="fas fa-briefcase icono"></i>
                  <span>{{ vacante.modalidad }}
                    <span *ngIf="vacante.tipo" class="badge-modality">{{ vacante.tipo }}</span>
                  </span>
                </li>
              </ul>
            </div>
          </div>

          <!-- Beneficios -->
          <div class="section" [class.collapsed]="!isSeccionVisible('beneficios', i)">
            <div class="section-title" (click)="toggleSeccion('beneficios', i)">
              <h4 class="fw-bold"><i class="fas fa-gift"></i> Beneficios</h4>
              <i class="fas fa-chevron-down section-toggle"></i>
            </div>
            <div class="section-content">
              <ul class="vacante-lista">
                <li *ngFor="let beneficio of vacante.beneficios">
                  <i class="fas fa-circle icono"></i>{{ beneficio }}
                </li>
              </ul>
            </div>
          </div>

          <!-- Requisitos y habilidades -->
          <div class="section" [class.collapsed]="!isSeccionVisible('requisitos', i)">
            <div class="section-title" (click)="toggleSeccion('requisitos', i)">
              <h4 class="fw-bold"> <i class="fas fa-list"></i> Requisitos y habilidades</h4>
              <i class="fas fa-chevron-down section-toggle"></i>
            </div>
            <div class="section-content">
              <ul class="vacante-lista">
                <li class="lista requisitos" *ngFor="let requisito of vacante.requisitos">
                  <i class="fas fa-circle icono"></i>{{ requisito }}
                </li>
              </ul>
            </div>
          </div>
          <!-- <div class="section requisitos" [class.collapsed]="!isSeccionVisible('requisitos', i)">
            <div class="section-title" (click)="toggleSeccion('requisitos', i)">
              <h4 class="fw-bold"><i class="fas fa-list"></i> Requisitos y habilidades</h4>
              <i class="fas fa-chevron-down section-toggle"></i>
            </div>
            <div class="section-content">
              <ul class="vacante-lista">
                <li *ngFor="let requisito of vacante.requisitos">
                  <i class="fas fa-circle icono"></i>{{ requisito }}
                </li>
              </ul>
            </div>
          </div> -->

        </div>
      </div>
    </div>

    <!-- Mensaje de carga -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-3"><span>Espere unos segundos, se estan cargando las vacantes...</span></p>
    </div>

    <!-- Mensaje de error -->
    <div *ngIf="error && !loading" class="alert alert-danger text-center" role="alert">
      {{ error }}
    </div>
  </div>
  <div *ngIf="!loading && !vacantes.length"><span>No hay vacantes disponibles.</span></div>
</div>


<!-- Inyectamos el modal-condicional en el mismo template -->
<app-card-vacante class="" *ngIf="modalOpen && selectedVacante" [vacante]="selectedVacante" (close)="closeModal()">
</app-card-vacante>